{"ast":null,"code":"var _jsxFileName = \"/home/max/chat/4at/client/src/Chat.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { ApolloClient, InMemoryCache, ApolloProvider, gql, useMutation, useSubscription } from \"@apollo/client\";\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\nimport { Container, Form, Row, Col, Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst link = new WebSocketLink({\n  uri: \"ws://localhost:4000\",\n  options: {\n    reconnect: true\n  }\n});\nconst client = new ApolloClient({\n  link,\n  uri: \"http://localhost:4000/\",\n  cache: new InMemoryCache()\n});\nconst GET_MESSAGES = gql`\n  subscription {\n    messages {\n      id\n      user\n      content\n    }\n  }\n`;\nconst POST_MESSAGES = gql`\n  mutation ($user: String!, $content: String!) {\n    postMessage(user: $user, content: $content)\n  }\n`;\n\nconst Messages = _ref => {\n  _s();\n\n  let {\n    user\n  } = _ref;\n  const {\n    data\n  } = useSubscription(GET_MESSAGES);\n  if (!data) return null;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: data.messages.map(_ref2 => {\n      let {\n        id,\n        user: messageUser,\n        content\n      } = _ref2;\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"flex\",\n          justifyContent: user === messageUser ? \"flex-end\" : \"flex-start\",\n          paddingBottom: \"1em\"\n        },\n        children: [user !== messageUser && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: 50,\n            width: 50,\n            marginRight: \"0.5em\",\n            border: \"2px solid #e5e6ea\",\n            borderRadius: 25,\n            textAlign: \"center\",\n            fontSize: \"18pt\",\n            paddingTop: \"5px\"\n          },\n          children: messageUser.slice(0, 2).toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            background: user === messageUser ? \"#58bf65\" : \"#e5e6ea\",\n            color: user === messageUser ? \"white\" : \"black\",\n            padding: \"1em\",\n            borderRadius: \"1em\",\n            maxWidth: \"60%\"\n          },\n          children: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)]\n      }, id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false);\n};\n\n_s(Messages, \"5LK+53Oia6K8c0VFEgmT72QLLdU=\", false, function () {\n  return [useSubscription];\n});\n\n_c = Messages;\n\nconst Chat = () => {\n  _s2();\n\n  const [state, setState] = useState({\n    user: \"Max\",\n    content: \"\"\n  });\n  const [postMessage] = useMutation(POST_MESSAGES);\n\n  const onSend = () => {\n    if (state.content.length > 0) {\n      postMessage({\n        variables: state\n      });\n    }\n\n    setState({ ...state,\n      content: \"\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Messages, {\n      user: state.user\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        xs: 2,\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"user\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"User\",\n            value: state.user,\n            onChange: e => setState({ ...state,\n              user: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: 8,\n        children: /*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          controlId: \"content\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            placeholder: \"Content\",\n            value: state.content,\n            onChange: e => setState({ ...state,\n              content: e.target.value\n            }),\n            onKeyUp: e => {\n              if (e.keyCode === 13) {\n                onSend();\n              }\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        xs: 2,\n        style: {\n          display: \"flex\",\n          alignItems: \"end\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          className: \"mb-3\",\n          variant: \"primary\",\n          style: {\n            width: \"100%\"\n          },\n          onClick: onSend,\n          children: \"Send message\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 5\n  }, this);\n};\n\n_s2(Chat, \"q3a4J2kIVcmmBZC92N2wTOrhyJo=\", false, function () {\n  return [useMutation];\n});\n\n_c2 = Chat;\n\nconst App = () => /*#__PURE__*/_jsxDEV(ApolloProvider, {\n  client: client,\n  children: /*#__PURE__*/_jsxDEV(Chat, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 151,\n  columnNumber: 3\n}, this);\n\n_c3 = App;\nexport default App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Messages\");\n$RefreshReg$(_c2, \"Chat\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"names":["React","useState","ApolloClient","InMemoryCache","ApolloProvider","gql","useMutation","useSubscription","WebSocketLink","Container","Form","Row","Col","Button","link","uri","options","reconnect","client","cache","GET_MESSAGES","POST_MESSAGES","Messages","user","data","messages","map","id","messageUser","content","display","justifyContent","paddingBottom","height","width","marginRight","border","borderRadius","textAlign","fontSize","paddingTop","slice","toUpperCase","background","color","padding","maxWidth","Chat","state","setState","postMessage","onSend","length","variables","e","target","value","keyCode","alignItems","App"],"sources":["/home/max/chat/4at/client/src/Chat.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport {\n  ApolloClient,\n  InMemoryCache,\n  ApolloProvider,\n  gql,\n  useMutation,\n  useSubscription,\n} from \"@apollo/client\";\nimport { WebSocketLink } from \"@apollo/client/link/ws\";\n\nimport { Container, Form, Row, Col, Button } from \"react-bootstrap\";\n\nconst link = new WebSocketLink({\n  uri: \"ws://localhost:4000\",\n  options: {\n    reconnect: true,\n  },\n});\n\nconst client = new ApolloClient({\n  link,\n  uri: \"http://localhost:4000/\",\n  cache: new InMemoryCache(),\n});\n\nconst GET_MESSAGES = gql`\n  subscription {\n    messages {\n      id\n      user\n      content\n    }\n  }\n`;\n\nconst POST_MESSAGES = gql`\n  mutation ($user: String!, $content: String!) {\n    postMessage(user: $user, content: $content)\n  }\n`;\n\nconst Messages = ({ user }) => {\n  const { data } = useSubscription(GET_MESSAGES);\n  if (!data) return null;\n  return (\n    <>\n      {data.messages.map(({ id, user: messageUser, content }) => (\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: user === messageUser ? \"flex-end\" : \"flex-start\",\n            paddingBottom: \"1em\",\n          }}\n          key={id}\n        >\n          {user !== messageUser && (\n            <div\n              style={{\n                height: 50,\n                width: 50,\n                marginRight: \"0.5em\",\n                border: \"2px solid #e5e6ea\",\n                borderRadius: 25,\n                textAlign: \"center\",\n                fontSize: \"18pt\",\n                paddingTop: \"5px\",\n              }}\n            >\n              {messageUser.slice(0, 2).toUpperCase()}\n            </div>\n          )}\n          <div\n            style={{\n              background: user === messageUser ? \"#58bf65\" : \"#e5e6ea\",\n              color: user === messageUser ? \"white\" : \"black\",\n              padding: \"1em\",\n              borderRadius: \"1em\",\n              maxWidth: \"60%\",\n            }}\n          >\n            {content}\n          </div>\n        </div>\n      ))}\n    </>\n  );\n};\n\nconst Chat = () => {\n  const [state, setState] = useState({\n    user: \"Max\",\n    content: \"\",\n  });\n\n  const [postMessage] = useMutation(POST_MESSAGES);\n\n  const onSend = () => {\n    if (state.content.length > 0) {\n      postMessage({ variables: state });\n    }\n\n    setState({ ...state, content: \"\" });\n  };\n\n  return (\n    <Container>\n      <Messages user={state.user} />\n      <Row>\n        <Col xs={2}>\n          <Form.Group className=\"mb-3\" controlId=\"user\">\n            <Form.Label>User</Form.Label>\n            <Form.Control\n              placeholder=\"User\"\n              value={state.user}\n              onChange={(e) => setState({ ...state, user: e.target.value })}\n            />\n          </Form.Group>\n        </Col>\n        <Col xs={8}>\n          <Form.Group className=\"mb-3\" controlId=\"content\">\n            <Form.Label>Content</Form.Label>\n            <Form.Control\n              placeholder=\"Content\"\n              value={state.content}\n              onChange={(e) => setState({ ...state, content: e.target.value })}\n              onKeyUp={(e) => {\n                if (e.keyCode === 13) {\n                  onSend();\n                }\n              }}\n            />\n          </Form.Group>\n        </Col>\n        <Col xs={2} style={{ display: \"flex\", alignItems: \"end\" }}>\n          <Button\n            className=\"mb-3\"\n            variant=\"primary\"\n            style={{ width: \"100%\" }}\n            onClick={onSend}\n          >\n            Send message\n          </Button>\n        </Col>\n      </Row>\n    </Container>\n  );\n};\n\nconst App = () => (\n  <ApolloProvider client={client}>\n    <Chat />\n  </ApolloProvider>\n)\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}